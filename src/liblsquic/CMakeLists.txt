# Copyright (c) 2017 - 2019 LiteSpeed Technologies Inc.  See LICENSE.
SET(lsquic_STAT_SRCS
    lsquic_alarmset.c
    lsquic_conn.c
    lsquic_full_conn.c
    lsquic_full_conn_ietf.c
    lsquic_chsk_stream.c
    lsquic_engine.c
    lsquic_parse_common.c
    lsquic_parse_gquic_common.c
    lsquic_parse_iquic_common.c
    lsquic_parse_gquic_le.c
    lsquic_parse_gquic_be.c
    lsquic_packet_in.c
    lsquic_packet_out.c
    lsquic_crypto.c
    lsquic_handshake.c
    lsquic_logger.c
    lsquic_malo.c
    lsquic_mm.c
    lsquic_rechist.c
    lsquic_rtt.c
    lsquic_send_ctl.c
    lsquic_senhist.c
    lsquic_cfcw.c
    lsquic_sfcw.c
    lsquic_stream.c
    lsquic_util.c
    lsquic_cubic.c
    lsquic_set.c
    lsquic_headers_stream.c
    lsquic_frame_reader.c
    lsquic_frame_writer.c
    lsquic_crt_compress.c
    lsquic_eng_hist.c
    lsquic_spi.c
    lsquic_di_nocopy.c
    lsquic_di_hash.c
    lsquic_di_error.c
    lsquic_global.c
    lsquic_packet_common.c
    lsquic_qlog.c
    lsquic_packet_gquic.c
    lsquic_ev_log.c
    lsquic_frame_common.c
    lsquic_packints.c
    lsquic_version.c
    lsquic_pacer.c
    lsquic_attq.c
    lsquic_str.c
    lsquic_arr.c
    lsquic_hash.c
    lsquic_buf.c
    lsquic_min_heap.c
    lsquic_parse_Q044.c
    lsquic_parse_Q046.c
    lsquic_http1x_if.c
    lsquic_trans_params.c
    lsquic_hkdf.c
    lsquic_enc_sess_ietf.c
    lsquic_enc_sess_common.c
    lsquic_parse_id20.c
    lsquic_varint.c
    lsquic_hq.c
    lsquic_hcsi_reader.c
    lsquic_hcso_writer.c
    lsquic_frab_list.c
    ls-qpack/lsqpack.c
    lsquic_qenc_hdl.c
    lsquic_qdec_hdl.c
    lsquic_h3_prio.c
)

include_directories(ls-qpack)

IF(PROJECT_NAME STREQUAL "openlitespeed")
    INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR}/src/spdy)
ELSE()
    SET(lsquic_STAT_SRCS ${lsquic_STAT_SRCS}
        lsquic_xxhash.c
        ../lshpack/lshpack.c
    )
ENDIF()



SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DXXH_HEADER_NAME=\\\"lsquic_xxhash.h\\\"")
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DLSQPACK_ENC_LOGGER_HEADER=\\\"lsquic_qpack_enc_logger.h\\\"")
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DLSQPACK_DEC_LOGGER_HEADER=\\\"lsquic_qpack_dec_logger.h\\\"")

add_library(lsquic STATIC ${lsquic_STAT_SRCS} )

link_directories(${PROJECT_SOURCE_DIR}/ssl/ /usr/local/lib)
